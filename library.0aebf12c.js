!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire4383;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequire4383=o);var a=o("dDDEV"),i=o("l5bVx"),c="genres";function l(e){({gallery:document.querySelector(".gallery")}).gallery.innerHTML=e.map((function(e){var t=e.poster_path,n=e.title,r=e.genre_ids,o=e.release_date,a=e.id,i=e.vote_average,c=o?o.slice(0,4):" No year",l=null===t?"https://i.ibb.co/1dYzZxK/Filmoteka-dummy.jpg":"https://image.tmdb.org/t/p/w500".concat(t);return'\n               <div class="card" movie-id="'.concat(a,'">\n               <img class="card__poster"  src=').concat(l,' alt\n               ="poster movie ').concat(n,'"  loading="lazy" width="320px" height="210px" />\n                    <div  class="card__info">\n                        <p class="info__title"><b>').concat(n,'</b><br/>\n                        </p>\n                        <p ><b class="info__genre">').concat(d(r),'</b>\n                       <span class="info__span"> | </span>\n                        <b class="info__release-date">').concat(c,'</b>\n                      <span class="info__vote_average">').concat(i.toFixed(1),"</span>\n                        </p>\n                    </div>\n                </div>\n            ")})).join("")}function d(t){var n,r,o=function(e){var n=t[e];if(e>1)return{v:a+="Other"};r.map((function(e){n===e.id&&(a+=e.name+", ")}))};try{n=localStorage.getItem(c),r=JSON.parse(n)}catch(e){console.log("getGenreNames() error: ",e.message)}for(var a="",l=0;l<t.length;l++){var d=o(l);if("object"===e(i)(d))return d.v}return a.slice(0,-2)}var s=o("b6Xps"),u=o("1VFfL"),m=o("2XzsB"),v="",y="",g=1e3,f={btnWatched:document.querySelector(".watched"),btnQueue:document.querySelector(".queue"),btnList:document.querySelector(".library-header__buttons"),libraryGallery:document.querySelector(".gallery"),loader:document.querySelector(".loader"),noItemsImg:document.querySelector(".library__no-items"),tuiContainer:document.getElementById("tui-pagination-container")};function b(){switch(v){case"QUEUE":f.btnQueue.click();break;case"WATCHED":f.btnWatched.click()}}function p(e){_(e.page,y),scrollSmooth.to(0)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=h(t),r=n[0][e-1];l(r)}function h(e){for(var t=y.length,n=Math.ceil(t/g),r=[],o=0;o<n;o+=1){var a=o*g,i=(o+1)*g;r.push(e.slice([a],[i]))}return r}window.addEventListener("load",(function(){f.btnQueue.click()})),f.btnList.addEventListener("click",(function(t){try{var n=t.target,r=n.name,o=n.tagName;if(v=r.toUpperCase(),"BUTTON"!==o)return;switch(v){case"QUEUE":f.btnQueue.classList.add("library-header__button--active"),f.btnWatched.classList.remove("library-header__button--active");break;case"WATCHED":f.btnWatched.classList.add("library-header__button--active"),f.btnQueue.classList.remove("library-header__button--active")}var i=(y=(0,s.getLocalStorage)(v)).length,c=Math.ceil(i/g);if(c<2&&(f.tuiContainer.style.display="none"),new(e(u))(f.tuiContainer,e(a)({},m.paginationOptions,{totalItems:c})).on("afterMove",p),!y.length)return f.libraryGallery.innerHTML="",f.noItemsImg.style.display="block",void f.loader.classList.add("is-hidden");f.loader.classList.add("is-hidden"),f.noItemsImg.style.display="none",_(1,h(y))}catch(e){console.log(e),f.libraryGallery.innerHTML=""}finally{return y}}));var S="WATCHED",q="QUEUE",w="REMOVE FROM",x="ADD TO",L=document.querySelector(".watched-btn"),E=document.querySelector(".queue-btn");function k(e,t){var n;try{if(n=localStorage.getItem(e))for(var r=JSON.parse(n),o=0;o<r.length;o++)if(r[o].id===t)return!0}catch(e){console.log("storageHasMovie() error: "+e)}return!1}L.addEventListener("click",(function(e){I(S,T,L),C.watched?(C.watched=!1,L.classList.remove("active"),L.blur()):(C.watched=!0,L.classList.add("active"))})),E.addEventListener("click",(function(e){I(q,T,E),C.queue?(C.queue=!1,E.classList.remove("active"),E.blur()):(C.queue=!0,E.classList.add("active"))}));var T,C={watched:!1,queue:!1};function O(){document.querySelector(".backdrop").style.display="none",document.querySelector("body").style.overflowY="visible",b()}function I(e,t,n){var r,o;try{if(r=localStorage.getItem(e),o=JSON.stringify([t]),!r)return localStorage.setItem(e,o),n.textContent=w+" "+e,void n.classList.add("active");for(var a=JSON.parse(r),i=0;i<a.length;i++)if(a[i].id===t.id)return a.splice(i,1),localStorage.setItem(e,JSON.stringify(a)),void(n.textContent=x+" "+e);a.push(t),localStorage.setItem(e,JSON.stringify(a)),n.textContent=w+" "+e}catch(e){console.log("addMovieToStorage() error: ",e.message)}}({libraryGallery:document.querySelector(".gallery")}).libraryGallery.addEventListener("click",(function(e){var t=e.target;if(t.closest(".card")){var n=t.closest(".card").getAttribute("movie-id"),r=y.find((function(e){if(Number(n)===e.id)return!0}));T=r;var o=null===r.poster_path?"https://i.ibb.co/1dYzZxK/Filmoteka-dummy.jpg":"https://image.tmdb.org/t/p/w500".concat(r.poster_path);document.querySelector(".content-card__img>img").setAttribute("src",o),document.querySelector(".content-card__title").innerText=r.title,document.querySelector(".content-card__about-text").innerText=r.overview,document.querySelector(".modal__movie-bord").innerText=r.vote_average.toFixed(1),document.querySelector(".modal__movie-number").innerText=r.vote_count,document.querySelector(".modal__movie-popularity").innerText=r.popularity.toFixed(1),document.querySelector(".modal__movie-original").innerText=r.original_title,document.querySelector(".modal__movie-genres").innerText=d(r.genre_ids),function(){document.querySelector(".backdrop").style.display="block",document.querySelector("body").style.overflowY="hidden",k(S,T.id)?L.textContent=w+" "+S:L.textContent=x+" "+S;k(q,T.id)?E.textContent=w+" "+q:E.textContent=x+" "+q}()}})),document.querySelector(".modal__close").addEventListener("click",O),window.addEventListener("click",(function(e){e.target===document.querySelector(".backdrop")&&O()})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&O()})),o("fDiVl"),o("9VC5X")}();
//# sourceMappingURL=library.0aebf12c.js.map
