function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire4383;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequire4383=o);const i="genres";function a(e){let t,n;try{t=localStorage.getItem(i),n=JSON.parse(t)}catch(e){console.log("getGenreNames() error: ",e.message)}let r="";for(let t=0;t<e.length;t++){const o=e[t];if(t>1)return r+="Other",r;n.map((e=>{o===e.id&&(r+=e.name+", ")}))}return r.slice(0,-2)}var l=o("eDhgr"),c=o("fb9GJ"),s=o("1nDO6");let d="",u="";const m={btnWatched:document.querySelector(".watched"),btnQueue:document.querySelector(".queue"),btnList:document.querySelector(".library-header__buttons"),libraryGallery:document.querySelector(".gallery"),loader:document.querySelector(".loader"),noItemsImg:document.querySelector(".library__no-items"),tuiContainer:document.getElementById("tui-pagination-container")};function y(){switch(d){case"QUEUE":m.btnQueue.click();break;case"WATCHED":m.btnWatched.click()}}function g(e){p(e.page,u),scrollSmooth.to(0)}function p(e=1,t){const n=b(t)[0][e-1];var r;r=n,document.querySelector(".gallery").innerHTML=r.map((e=>{const{poster_path:t,title:n,genre_ids:r,release_date:o,id:i,vote_average:l}=e,c=o?o.slice(0,4):" No year";return`\n               <div class="card" movie-id="${i}">\n               <img class="card__poster"  src=${null===t?"https://i.ibb.co/1dYzZxK/Filmoteka-dummy.jpg":`https://image.tmdb.org/t/p/w500${t}`} alt\n               ="poster movie ${n}"  loading="lazy" width="320px" height="210px" />\n                    <div  class="card__info">\n                        <p class="info__title"><b>${n}</b><br/>\n                        </p>\n                        <p ><b class="info__genre">${a(r)}</b>\n                       <span class="info__span"> | </span>\n                        <b class="info__release-date">${c}</b>\n                      <span class="info__vote_average">${l.toFixed(1)}</span>\n                        </p>\n                    </div>\n                </div>\n            `})).join("")}function b(e){const t=u.length,n=Math.ceil(t/1e3);let r=[];for(let t=0;t<n;t+=1){const n=1e3*t,o=1e3*(t+1);r.push(e.slice([n],[o]))}return r}window.addEventListener("load",(()=>{m.btnQueue.click()})),m.btnList.addEventListener("click",(function(t){try{let{name:n,tagName:r}=t.target;if(d=n.toUpperCase(),"BUTTON"!==r)return;switch(d){case"QUEUE":m.btnQueue.classList.add("library-header__button--active"),m.btnWatched.classList.remove("library-header__button--active");break;case"WATCHED":m.btnWatched.classList.add("library-header__button--active"),m.btnQueue.classList.remove("library-header__button--active")}u=(0,l.getLocalStorage)(d);const o=u.length,i=Math.ceil(o/1e3);i<2&&(m.tuiContainer.style.display="none");if(new(e(c))(m.tuiContainer,{...s.paginationOptions,totalItems:i}).on("afterMove",g),!u.length)return m.libraryGallery.innerHTML="",m.noItemsImg.style.display="block",void m.loader.classList.add("is-hidden");m.loader.classList.add("is-hidden"),m.noItemsImg.style.display="none";const a=b(u);p(page=1,a)}catch(e){m.libraryGallery.innerHTML=""}finally{return u}}));const f="WATCHED",_="QUEUE",v="REMOVE FROM",h="ADD TO",S=document.querySelector(".watched-btn"),q=document.querySelector(".queue-btn");function w(e,t){let n;try{if(n=localStorage.getItem(e),n){let e=JSON.parse(n);for(let n=0;n<e.length;n++)if(e[n].id===t)return!0}}catch(e){console.log("storageHasMovie() error: "+e)}return!1}S.addEventListener("click",(function(e){k(f,x,S),L.watched?(L.watched=!1,S.classList.remove("active"),S.blur()):(L.watched=!0,S.classList.add("active"))})),q.addEventListener("click",(function(e){k(_,x,q),L.queue?(L.queue=!1,q.classList.remove("active"),q.blur()):(L.queue=!0,q.classList.add("active"))}));let x,L={watched:!1,queue:!1};function E(){document.querySelector(".backdrop").style.display="none",document.querySelector("body").style.overflowY="visible",y()}function k(e,t,n){let r,o;try{if(r=localStorage.getItem(e),o=JSON.stringify([t]),!r)return localStorage.setItem(e,o),n.textContent=v+" "+e,void n.classList.add("active");let i=JSON.parse(r);for(let r=0;r<i.length;r++)if(i[r].id===t.id)return i.splice(r,1),localStorage.setItem(e,JSON.stringify(i)),void(n.textContent=h+" "+e);i.push(t),localStorage.setItem(e,JSON.stringify(i)),n.textContent=v+" "+e}catch(e){console.log("addMovieToStorage() error: ",e.message)}}({libraryGallery:document.querySelector(".gallery")}).libraryGallery.addEventListener("click",(function(e){let t=e.target;if(t.closest(".card")){const e=t.closest(".card").getAttribute("movie-id"),n=u.find((t=>{if(Number(e)===t.id)return!0}));x=n;const r=null===n.poster_path?"https://i.ibb.co/1dYzZxK/Filmoteka-dummy.jpg":`https://image.tmdb.org/t/p/w500${n.poster_path}`;document.querySelector(".content-card__img>img").setAttribute("src",r),document.querySelector(".content-card__title").innerText=n.title,document.querySelector(".content-card__about-text").innerText=n.overview,document.querySelector(".modal__movie-bord").innerText=n.vote_average.toFixed(1),document.querySelector(".modal__movie-number").innerText=n.vote_count,document.querySelector(".modal__movie-popularity").innerText=n.popularity.toFixed(1),document.querySelector(".modal__movie-original").innerText=n.original_title,document.querySelector(".modal__movie-genres").innerText=a(n.genre_ids),function(){document.querySelector(".backdrop").style.display="block",document.querySelector("body").style.overflowY="hidden",w(f,x.id)?S.textContent=v+" "+f:S.textContent=h+" "+f;w(_,x.id)?q.textContent=v+" "+_:q.textContent=h+" "+_}()}})),document.querySelector(".modal__close").addEventListener("click",E),window.addEventListener("click",(function(e){e.target===document.querySelector(".backdrop")&&E()})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&E()})),o("3hXKf"),o("4S0r6");
//# sourceMappingURL=library.4de812bf.js.map
