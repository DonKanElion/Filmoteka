var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},n=e.parcelRequire4383;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequire4383=n);const o="genres";function i(e){let t,r;try{t=localStorage.getItem(o),r=JSON.parse(t)}catch(e){console.log("getGenreNames() error: ",e.message)}let n="";for(let t=0;t<e.length;t++){const o=e[t];if(t>1)return n+="Other",n;r.map((e=>{o===e.id&&(n+=e.name+", ")}))}return n.slice(0,-2)}var a=n("eDhgr");let l="",c="";const s={btnWatched:document.querySelector(".watched"),btnQueue:document.querySelector(".queue"),btnList:document.querySelector(".library-header__buttons"),libraryGallery:document.querySelector(".gallery"),loader:document.querySelector(".loader"),noItemsImg:document.querySelector(".library__no-items")};function d(){switch(l){case"QUEUE":s.btnQueue.click();break;case"WATCHED":s.btnWatched.click()}}function u(e=1,t){const r=m(t)[0][e-1];var n;n=r,document.querySelector(".gallery").innerHTML=n.map((e=>{const{poster_path:t,title:r,genre_ids:n,release_date:o,id:a,vote_average:l}=e,c=o?o.slice(0,4):" No year";return`\n               <div class="card" movie-id="${a}">\n               <img class="card__poster"  src=${null===t?"https://i.ibb.co/1dYzZxK/Filmoteka-dummy.jpg":`https://image.tmdb.org/t/p/w500${t}`} alt\n               ="poster movie ${r}"  loading="lazy" width="320px" height="210px" />\n                    <div  class="card__info">\n                        <p class="info__title"><b>${r}</b><br/>\n                        </p>\n                        <p ><b class="info__genre">${i(n)}</b>\n                       <span class="info__span"> | </span>\n                        <b class="info__release-date">${c}</b>\n                      <span class="info__vote_average">${l.toFixed(1)}</span>\n                                              </p>\n                    </div>\n                </div>\n            `})).join("")}function m(e){const t=c.length,r=Math.ceil(t/1e3);let n=[];for(let t=0;t<r;t+=1){const r=1e3*t,o=1e3*(t+1);n.push(e.slice([r],[o]))}return n}window.addEventListener("load",(()=>{s.btnQueue.click()})),s.btnList.addEventListener("click",(function(e){let{name:t,tagName:r}=e.target;if(l=t.toUpperCase(),"BUTTON"!==r)return;switch(l){case"QUEUE":s.btnQueue.classList.add("library-header__button--active"),s.btnWatched.classList.remove("library-header__button--active");break;case"WATCHED":s.btnWatched.classList.add("library-header__button--active"),s.btnQueue.classList.remove("library-header__button--active")}c=(0,a.getLocalStorage)(l);const n=c.length;Math.ceil(n/1e3);if(!c.length)return s.libraryGallery.innerHTML="",void(s.noItemsImg.style.display="block");try{s.loader.classList.add("is-hidden"),s.noItemsImg.style.display="none";const e=m(c);u(page=1,e)}catch(e){s.libraryGallery.innerHTML=""}finally{return c}}));const y="WATCHED",g="QUEUE",b="REMOVE FROM",p="ADD TO",_=document.querySelector(".watched-btn"),v=document.querySelector(".queue-btn");function f(e,t){let r;try{if(r=localStorage.getItem(e),r){let e=JSON.parse(r);for(let r=0;r<e.length;r++)if(e[r].id===t)return!0}}catch(e){console.log("storageHasMovie() error: "+e)}return!1}_.addEventListener("click",(function(e){w(y,h,_),S.watched?(S.watched=!1,_.classList.remove("active"),_.blur()):(S.watched=!0,_.classList.add("active"))})),v.addEventListener("click",(function(e){w(g,h,v),S.queue?(S.queue=!1,v.classList.remove("active"),v.blur()):(S.queue=!0,v.classList.add("active"))}));let h,S={watched:!1,queue:!1};function q(){document.querySelector(".backdrop").style.display="none",document.querySelector("body").style.overflowY="visible",d()}function w(e,t,r){let n,o;try{if(n=localStorage.getItem(e),o=JSON.stringify([t]),!n)return localStorage.setItem(e,o),r.textContent=b+" "+e,void r.classList.add("active");let i=JSON.parse(n);for(let n=0;n<i.length;n++)if(i[n].id===t.id)return i.splice(n,1),localStorage.setItem(e,JSON.stringify(i)),void(r.textContent=p+" "+e);i.push(t),localStorage.setItem(e,JSON.stringify(i)),r.textContent=b+" "+e}catch(e){console.log("addMovieToStorage() error: ",e.message)}}({libraryGallery:document.querySelector(".gallery")}).libraryGallery.addEventListener("click",(function(e){let t=e.target;if(t.closest(".card")){const e=t.closest(".card").getAttribute("movie-id"),r=c.find((t=>{if(Number(e)===t.id)return!0}));h=r;const n=null===r.poster_path?"https://i.ibb.co/1dYzZxK/Filmoteka-dummy.jpg":`https://image.tmdb.org/t/p/w500${r.poster_path}`;document.querySelector(".content-card__img>img").setAttribute("src",n),document.querySelector(".content-card__title").innerText=r.title,document.querySelector(".content-card__about-text").innerText=r.overview,document.querySelector(".modal__movie-bord").innerText=r.vote_average.toFixed(1),document.querySelector(".modal__movie-number").innerText=r.vote_count,document.querySelector(".modal__movie-popularity").innerText=r.popularity.toFixed(1),document.querySelector(".modal__movie-original").innerText=r.original_title,document.querySelector(".modal__movie-genres").innerText=i(r.genre_ids),function(){document.querySelector(".backdrop").style.display="block",document.querySelector("body").style.overflowY="hidden",f(y,h.id)?_.textContent=b+" "+y:_.textContent=p+" "+y;f(g,h.id)?v.textContent=b+" "+g:v.textContent=p+" "+g}()}})),document.querySelector(".modal__close").addEventListener("click",q),window.addEventListener("click",(function(e){e.target===document.querySelector(".backdrop")&&q()})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&q()})),n("3hXKf"),n("4S0r6");
//# sourceMappingURL=library.e7cbc15e.js.map
