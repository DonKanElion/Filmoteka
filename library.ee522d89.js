!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequire4383;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire4383=o);var a=o("l5bVx"),i="genres";function c(e){({gallery:document.querySelector(".gallery")}).gallery.innerHTML=e.map((function(e){var t=e.poster_path,r=e.title,n=e.genre_ids,o=e.release_date,a=e.id,i=e.vote_average,c=o?o.slice(0,4):" No year",d=null===t?"https://i.ibb.co/1dYzZxK/Filmoteka-dummy.jpg":"https://image.tmdb.org/t/p/w500".concat(t);return'\n               <div class="card" movie-id="'.concat(a,'">\n               <img class="card__poster"  src=').concat(d,' alt\n               ="poster movie ').concat(r,'"  loading="lazy" width="320px" height="210px" />\n                    <div  class="card__info">\n                        <p class="info__title"><b>').concat(r,'</b><br/>\n                        </p>\n                        <p ><b class="info__genre">').concat(l(n),'</b>\n                       <span class="info__span"> | </span>\n                        <b class="info__release-date">').concat(c,'</b>\n                      <span class="info__vote_average">').concat(i.toFixed(1),"</span>\n                                              </p>\n                    </div>\n                </div>\n            ")})).join("")}function l(t){var r,n,o=function(e){var r=t[e];if(e>1)return{v:c+="Other"};n.map((function(e){r===e.id&&(c+=e.name+", ")}))};try{r=localStorage.getItem(i),n=JSON.parse(r)}catch(e){console.log("getGenreNames() error: ",e.message)}for(var c="",l=0;l<t.length;l++){var d=o(l);if("object"===e(a)(d))return d.v}return c.slice(0,-2)}var d=o("b6Xps"),s="",u="",v=1e3,m={btnWatched:document.querySelector(".watched"),btnQueue:document.querySelector(".queue"),btnList:document.querySelector(".library-header__buttons"),libraryGallery:document.querySelector(".gallery"),loader:document.querySelector(".loader"),noItemsImg:document.querySelector(".library__no-items")};function y(){switch(s){case"QUEUE":m.btnQueue.click();break;case"WATCHED":m.btnWatched.click()}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,r=b(t),n=r[0][e-1];c(n)}function b(e){for(var t=u.length,r=Math.ceil(t/v),n=[],o=0;o<r;o+=1){var a=o*v,i=(o+1)*v;n.push(e.slice([a],[i]))}return n}window.addEventListener("load",(function(){m.btnQueue.click()})),m.btnList.addEventListener("click",(function(e){var t=e.target,r=t.name,n=t.tagName;if(s=r.toUpperCase(),"BUTTON"!==n)return;switch(s){case"QUEUE":m.btnQueue.classList.add("library-header__button--active"),m.btnWatched.classList.remove("library-header__button--active");break;case"WATCHED":m.btnWatched.classList.add("library-header__button--active"),m.btnQueue.classList.remove("library-header__button--active")}var o=(u=(0,d.getLocalStorage)(s)).length;Math.ceil(o/v);if(!u.length)return m.libraryGallery.innerHTML="",void(m.noItemsImg.style.display="block");try{m.loader.classList.add("is-hidden"),m.noItemsImg.style.display="none";var a=b(u);g(page=1,a)}catch(e){m.libraryGallery.innerHTML=""}finally{return u}}));var f="WATCHED",p="QUEUE",_="REMOVE FROM",h="ADD TO",S=document.querySelector(".watched-btn"),q=document.querySelector(".queue-btn");function x(e,t){var r;try{if(r=localStorage.getItem(e))for(var n=JSON.parse(r),o=0;o<n.length;o++)if(n[o].id===t)return!0}catch(e){console.log("storageHasMovie() error: "+e)}return!1}S.addEventListener("click",(function(e){k(f,w,S),L.watched?(L.watched=!1,S.classList.remove("active"),S.blur()):(L.watched=!0,S.classList.add("active"))})),q.addEventListener("click",(function(e){k(p,w,q),L.queue?(L.queue=!1,q.classList.remove("active"),q.blur()):(L.queue=!0,q.classList.add("active"))}));var w,L={watched:!1,queue:!1};function E(){document.querySelector(".backdrop").style.display="none",document.querySelector("body").style.overflowY="visible",y()}function k(e,t,r){var n,o;try{if(n=localStorage.getItem(e),o=JSON.stringify([t]),!n)return localStorage.setItem(e,o),r.textContent=_+" "+e,void r.classList.add("active");for(var a=JSON.parse(n),i=0;i<a.length;i++)if(a[i].id===t.id)return a.splice(i,1),localStorage.setItem(e,JSON.stringify(a)),void(r.textContent=h+" "+e);a.push(t),localStorage.setItem(e,JSON.stringify(a)),r.textContent=_+" "+e}catch(e){console.log("addMovieToStorage() error: ",e.message)}}({libraryGallery:document.querySelector(".gallery")}).libraryGallery.addEventListener("click",(function(e){var t=e.target;if(t.closest(".card")){var r=t.closest(".card").getAttribute("movie-id"),n=u.find((function(e){if(Number(r)===e.id)return!0}));w=n;var o=null===n.poster_path?"https://i.ibb.co/1dYzZxK/Filmoteka-dummy.jpg":"https://image.tmdb.org/t/p/w500".concat(n.poster_path);document.querySelector(".content-card__img>img").setAttribute("src",o),document.querySelector(".content-card__title").innerText=n.title,document.querySelector(".content-card__about-text").innerText=n.overview,document.querySelector(".modal__movie-bord").innerText=n.vote_average.toFixed(1),document.querySelector(".modal__movie-number").innerText=n.vote_count,document.querySelector(".modal__movie-popularity").innerText=n.popularity.toFixed(1),document.querySelector(".modal__movie-original").innerText=n.original_title,document.querySelector(".modal__movie-genres").innerText=l(n.genre_ids),function(){document.querySelector(".backdrop").style.display="block",document.querySelector("body").style.overflowY="hidden",x(f,w.id)?S.textContent=_+" "+f:S.textContent=h+" "+f;x(p,w.id)?q.textContent=_+" "+p:q.textContent=h+" "+p}()}})),document.querySelector(".modal__close").addEventListener("click",E),window.addEventListener("click",(function(e){e.target===document.querySelector(".backdrop")&&E()})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&E()})),o("fDiVl"),o("9VC5X")}();
//# sourceMappingURL=library.ee522d89.js.map
